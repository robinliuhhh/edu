{"remainingRequest":"D:\\Java就业急训营\\作业\\stage-10\\edu-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Java就业急训营\\作业\\stage-10\\edu-vue\\src\\components\\updateUserInfo.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Java就业急训营\\作业\\stage-10\\edu-vue\\src\\components\\updateUserInfo.vue","mtime":1626828999564},{"path":"D:\\Java就业急训营\\作业\\stage-10\\edu-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1626701258964},{"path":"D:\\Java就业急训营\\作业\\stage-10\\edu-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1626701242718},{"path":"D:\\Java就业急训营\\作业\\stage-10\\edu-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1626701258964},{"path":"D:\\Java就业急训营\\作业\\stage-10\\edu-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1626701377449}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogICAgZGF0YSgpIHsNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgdXNlcjogbnVsbCwNCiAgICAgICAgaWQ6ICIiLA0KICAgICAgICBwb3J0cmFpdDogIiIsDQogICAgICAgIG5ld1BvcnRyYWl0OiAiIiwNCiAgICAgICAgbmFtZTogIiIsDQogICAgICAgIG5ld05hbWU6ICIiDQogICAgICAgIH07DQogICAgfSwNCiAgICBjcmVhdGVkKCkgew0KICAgICAgICB0aGlzLnVzZXIgPSBKU09OLnBhcnNlKCBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidXNlciIpICk7DQogICAgICAgIGlmKCB0aGlzLnVzZXIgIT0gbnVsbCApew0KICAgICAgICAgICAgY29uc29sZS5sb2coImlkICIrdGhpcy5pZCk7DQogICAgICAgICAgICB0aGlzLmlkID0gdGhpcy51c2VyLmNvbnRlbnQuaWQNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCLmt7vliqDlkI5pZCAiK3RoaXMuaWQpOyANCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJwb3J0cmFpdCAiK3RoaXMucG9ydHJhaXQpOw0KICAgICAgICAgICAgdGhpcy5wb3J0cmFpdCA9IHRoaXMudXNlci5jb250ZW50LnBvcnRyYWl0Ow0KICAgICAgICAgICAgY29uc29sZS5sb2coIua3u+WKoOWQjnBvcnRyYWl0ICIrdGhpcy5wb3J0cmFpdCk7DQogICAgICAgICAgICBjb25zb2xlLmxvZygibmFtZSAiK3RoaXMubmFtZSk7DQogICAgICAgICAgICB0aGlzLm5hbWUgPSB0aGlzLnVzZXIuY29udGVudC5uYW1lOw0KICAgICAgICAgICAgY29uc29sZS5sb2coIua3u+WKoOWQjm5hbWUgIit0aGlzLm5hbWUpOw0KICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy51c2VyKTsNCiAgICAgICAgfQ0KICAgIH0sDQogICAgbWV0aG9kczogew0KICAgICAgaGFuZGxlQXZhdGFyU3VjY2VzcyhyZXMsIGZpbGUpIHsNCiAgICAgICAgY29uc29sZS5sb2cocmVzKTsNCiAgICAgICAgdGhpcy5uZXdQb3J0cmFpdCA9IHJlcy5maWxlUGF0aDsNCiAgICAgIH0sDQogICAgICB1cGRhdGVVc2VySW5mbygpIHsNCiAgICAgIGlmICh0aGlzLm5ld05hbWUgPT0gIiIpIHsNCiAgICAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKCLnlKjmiLfmmLXnp7DkuI3og73kuLrnqbrvvIEiKTsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KICAgICAgaWYgKHRoaXMubmV3UG9ydHJhaXQgPT0gIiIpIHsNCiAgICAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKCLnlKjmiLflpLTlg4/kuI3og73kuLrnqbrvvIEiKTsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KICAgICAgcmV0dXJuIHRoaXMuYXhpb3MNCiAgICAgICAgLnBvc3QoImh0dHA6Ly9sb2NhbGhvc3Q6ODAvdXNlci91cGRhdGVVc2VySW5mbyIsIHsNCiAgICAgICAgICBpZDogdGhpcy5pZCwNCiAgICAgICAgICBwb3J0cmFpdDogdGhpcy5uZXdQb3J0cmFpdCwNCiAgICAgICAgICBuYW1lOiB0aGlzLm5ld05hbWUNCiAgICAgICAgfSkNCiAgICAgICAgLnRoZW4oKHJlc3VsdCkgPT4gew0KICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7DQogICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLmm7TmlrDnlKjmiLfkv6Hmga/miJDlip/vvIEiKTsNCiAgICAgICAgICB0aGlzLm5hbWUgPSB0aGlzLm5ld05hbWU7DQogICAgICAgICAgdGhpcy5wb3J0cmFpdCA9IHRoaXMubmV3UG9ydHJhaXQ7DQogICAgICAgIH0pDQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsNCiAgICAgICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoIuabtOaWsOeUqOaIt+S/oeaBr+Wksei0pe+8gSIpOw0KICAgICAgICB9KTsNCiAgICAgIH0NCiAgICB9DQp9DQo="},{"version":3,"sources":["updateUserInfo.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAsBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"updateUserInfo.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n<div>\r\n    <el-form>\r\n    <el-form-item label=\"头像\">\r\n        <el-upload\r\n            action=\"http://localhost:80/user/upload\"\r\n            name=\"file\"\r\n            :limit=\"1\"            \r\n            :on-success=\"handleAvatarSuccess\"\r\n            list-type=\"picture-card\">\r\n            <i   class=\"el-icon-plus\"></i>\r\n        </el-upload>\r\n    </el-form-item>\r\n    <el-form-item label=\"昵称\">\r\n        <el-input type=\"text\" v-model=\"newName\"></el-input>\r\n    </el-form-item>\r\n        <el-button type=\"primary\" @click=\"updateUserInfo\">更新信息</el-button>\r\n    </el-form>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    data() {\r\n        return {\r\n        user: null,\r\n        id: \"\",\r\n        portrait: \"\",\r\n        newPortrait: \"\",\r\n        name: \"\",\r\n        newName: \"\"\r\n        };\r\n    },\r\n    created() {\r\n        this.user = JSON.parse( localStorage.getItem(\"user\") );\r\n        if( this.user != null ){\r\n            console.log(\"id \"+this.id);\r\n            this.id = this.user.content.id\r\n            console.log(\"添加后id \"+this.id); \r\n            console.log(\"portrait \"+this.portrait);\r\n            this.portrait = this.user.content.portrait;\r\n            console.log(\"添加后portrait \"+this.portrait);\r\n            console.log(\"name \"+this.name);\r\n            this.name = this.user.content.name;\r\n            console.log(\"添加后name \"+this.name);\r\n            console.log(this.user);\r\n        }\r\n    },\r\n    methods: {\r\n      handleAvatarSuccess(res, file) {\r\n        console.log(res);\r\n        this.newPortrait = res.filePath;\r\n      },\r\n      updateUserInfo() {\r\n      if (this.newName == \"\") {\r\n        this.$message.warning(\"用户昵称不能为空！\");\r\n        return;\r\n      }\r\n      if (this.newPortrait == \"\") {\r\n        this.$message.warning(\"用户头像不能为空！\");\r\n        return;\r\n      }\r\n      return this.axios\r\n        .post(\"http://localhost:80/user/updateUserInfo\", {\r\n          id: this.id,\r\n          portrait: this.newPortrait,\r\n          name: this.newName\r\n        })\r\n        .then((result) => {\r\n          console.log(result);\r\n          this.$message.success(\"更新用户信息成功！\");\r\n          this.name = this.newName;\r\n          this.portrait = this.newPortrait;\r\n        })\r\n        .catch((error) => {\r\n          this.$message.warning(\"更新用户信息失败！\");\r\n        });\r\n      }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n</style>"]}]}