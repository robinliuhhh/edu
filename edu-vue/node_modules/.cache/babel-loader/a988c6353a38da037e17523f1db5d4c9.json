{"remainingRequest":"D:\\Java就业急训营\\作业\\stage-10\\edu-vue\\node_modules\\babel-loader\\lib\\index.js!D:\\Java就业急训营\\作业\\stage-10\\edu-vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Java就业急训营\\作业\\stage-10\\edu-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Java就业急训营\\作业\\stage-10\\edu-vue\\src\\components\\updateUserInfo.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Java就业急训营\\作业\\stage-10\\edu-vue\\src\\components\\updateUserInfo.vue","mtime":1626828999564},{"path":"D:\\Java就业急训营\\作业\\stage-10\\edu-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1626701258964},{"path":"D:\\Java就业急训营\\作业\\stage-10\\edu-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1626701242718},{"path":"D:\\Java就业急训营\\作业\\stage-10\\edu-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1626701258964},{"path":"D:\\Java就业急训营\\作业\\stage-10\\edu-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1626701377449}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdXNlcjogbnVsbCwKICAgICAgaWQ6ICIiLAogICAgICBwb3J0cmFpdDogIiIsCiAgICAgIG5ld1BvcnRyYWl0OiAiIiwKICAgICAgbmFtZTogIiIsCiAgICAgIG5ld05hbWU6ICIiCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMudXNlciA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oInVzZXIiKSk7CgogICAgaWYgKHRoaXMudXNlciAhPSBudWxsKSB7CiAgICAgIGNvbnNvbGUubG9nKCJpZCAiICsgdGhpcy5pZCk7CiAgICAgIHRoaXMuaWQgPSB0aGlzLnVzZXIuY29udGVudC5pZDsKICAgICAgY29uc29sZS5sb2coIua3u+WKoOWQjmlkICIgKyB0aGlzLmlkKTsKICAgICAgY29uc29sZS5sb2coInBvcnRyYWl0ICIgKyB0aGlzLnBvcnRyYWl0KTsKICAgICAgdGhpcy5wb3J0cmFpdCA9IHRoaXMudXNlci5jb250ZW50LnBvcnRyYWl0OwogICAgICBjb25zb2xlLmxvZygi5re75Yqg5ZCOcG9ydHJhaXQgIiArIHRoaXMucG9ydHJhaXQpOwogICAgICBjb25zb2xlLmxvZygibmFtZSAiICsgdGhpcy5uYW1lKTsKICAgICAgdGhpcy5uYW1lID0gdGhpcy51c2VyLmNvbnRlbnQubmFtZTsKICAgICAgY29uc29sZS5sb2coIua3u+WKoOWQjm5hbWUgIiArIHRoaXMubmFtZSk7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMudXNlcik7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBoYW5kbGVBdmF0YXJTdWNjZXNzOiBmdW5jdGlvbiBoYW5kbGVBdmF0YXJTdWNjZXNzKHJlcywgZmlsZSkgewogICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICB0aGlzLm5ld1BvcnRyYWl0ID0gcmVzLmZpbGVQYXRoOwogICAgfSwKICAgIHVwZGF0ZVVzZXJJbmZvOiBmdW5jdGlvbiB1cGRhdGVVc2VySW5mbygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGlmICh0aGlzLm5ld05hbWUgPT0gIiIpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoIueUqOaIt+aYteensOS4jeiDveS4uuepuu+8gSIpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKHRoaXMubmV3UG9ydHJhaXQgPT0gIiIpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoIueUqOaIt+WktOWDj+S4jeiDveS4uuepuu+8gSIpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXMuYXhpb3MucG9zdCgiaHR0cDovL2xvY2FsaG9zdDo4MC91c2VyL3VwZGF0ZVVzZXJJbmZvIiwgewogICAgICAgIGlkOiB0aGlzLmlkLAogICAgICAgIHBvcnRyYWl0OiB0aGlzLm5ld1BvcnRyYWl0LAogICAgICAgIG5hbWU6IHRoaXMubmV3TmFtZQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpOwoKICAgICAgICBfdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLmm7TmlrDnlKjmiLfkv6Hmga/miJDlip/vvIEiKTsKCiAgICAgICAgX3RoaXMubmFtZSA9IF90aGlzLm5ld05hbWU7CiAgICAgICAgX3RoaXMucG9ydHJhaXQgPSBfdGhpcy5uZXdQb3J0cmFpdDsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgX3RoaXMuJG1lc3NhZ2Uud2FybmluZygi5pu05paw55So5oi35L+h5oGv5aSx6LSl77yBIik7CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["updateUserInfo.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAsBA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,IAAA,EAAA,IADA;AAEA,MAAA,EAAA,EAAA,EAFA;AAGA,MAAA,QAAA,EAAA,EAHA;AAIA,MAAA,WAAA,EAAA,EAJA;AAKA,MAAA,IAAA,EAAA,EALA;AAMA,MAAA,OAAA,EAAA;AANA,KAAA;AAQA,GAVA;AAWA,EAAA,OAXA,qBAWA;AACA,SAAA,IAAA,GAAA,IAAA,CAAA,KAAA,CAAA,YAAA,CAAA,OAAA,CAAA,MAAA,CAAA,CAAA;;AACA,QAAA,KAAA,IAAA,IAAA,IAAA,EAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,QAAA,KAAA,EAAA;AACA,WAAA,EAAA,GAAA,KAAA,IAAA,CAAA,OAAA,CAAA,EAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,WAAA,KAAA,EAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,cAAA,KAAA,QAAA;AACA,WAAA,QAAA,GAAA,KAAA,IAAA,CAAA,OAAA,CAAA,QAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,iBAAA,KAAA,QAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,UAAA,KAAA,IAAA;AACA,WAAA,IAAA,GAAA,KAAA,IAAA,CAAA,OAAA,CAAA,IAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,aAAA,KAAA,IAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,KAAA,IAAA;AACA;AACA,GAzBA;AA0BA,EAAA,OAAA,EAAA;AACA,IAAA,mBADA,+BACA,GADA,EACA,IADA,EACA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,GAAA;AACA,WAAA,WAAA,GAAA,GAAA,CAAA,QAAA;AACA,KAJA;AAKA,IAAA,cALA,4BAKA;AAAA;;AACA,UAAA,KAAA,OAAA,IAAA,EAAA,EAAA;AACA,aAAA,QAAA,CAAA,OAAA,CAAA,WAAA;AACA;AACA;;AACA,UAAA,KAAA,WAAA,IAAA,EAAA,EAAA;AACA,aAAA,QAAA,CAAA,OAAA,CAAA,WAAA;AACA;AACA;;AACA,aAAA,KAAA,KAAA,CACA,IADA,CACA,yCADA,EACA;AACA,QAAA,EAAA,EAAA,KAAA,EADA;AAEA,QAAA,QAAA,EAAA,KAAA,WAFA;AAGA,QAAA,IAAA,EAAA,KAAA;AAHA,OADA,EAMA,IANA,CAMA,UAAA,MAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,MAAA;;AACA,QAAA,KAAA,CAAA,QAAA,CAAA,OAAA,CAAA,WAAA;;AACA,QAAA,KAAA,CAAA,IAAA,GAAA,KAAA,CAAA,OAAA;AACA,QAAA,KAAA,CAAA,QAAA,GAAA,KAAA,CAAA,WAAA;AACA,OAXA,EAYA,KAZA,CAYA,UAAA,KAAA,EAAA;AACA,QAAA,KAAA,CAAA,QAAA,CAAA,OAAA,CAAA,WAAA;AACA,OAdA,CAAA;AAeA;AA7BA;AA1BA,CAAA","sourcesContent":["<template>\r\n<div>\r\n    <el-form>\r\n    <el-form-item label=\"头像\">\r\n        <el-upload\r\n            action=\"http://localhost:80/user/upload\"\r\n            name=\"file\"\r\n            :limit=\"1\"            \r\n            :on-success=\"handleAvatarSuccess\"\r\n            list-type=\"picture-card\">\r\n            <i   class=\"el-icon-plus\"></i>\r\n        </el-upload>\r\n    </el-form-item>\r\n    <el-form-item label=\"昵称\">\r\n        <el-input type=\"text\" v-model=\"newName\"></el-input>\r\n    </el-form-item>\r\n        <el-button type=\"primary\" @click=\"updateUserInfo\">更新信息</el-button>\r\n    </el-form>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    data() {\r\n        return {\r\n        user: null,\r\n        id: \"\",\r\n        portrait: \"\",\r\n        newPortrait: \"\",\r\n        name: \"\",\r\n        newName: \"\"\r\n        };\r\n    },\r\n    created() {\r\n        this.user = JSON.parse( localStorage.getItem(\"user\") );\r\n        if( this.user != null ){\r\n            console.log(\"id \"+this.id);\r\n            this.id = this.user.content.id\r\n            console.log(\"添加后id \"+this.id); \r\n            console.log(\"portrait \"+this.portrait);\r\n            this.portrait = this.user.content.portrait;\r\n            console.log(\"添加后portrait \"+this.portrait);\r\n            console.log(\"name \"+this.name);\r\n            this.name = this.user.content.name;\r\n            console.log(\"添加后name \"+this.name);\r\n            console.log(this.user);\r\n        }\r\n    },\r\n    methods: {\r\n      handleAvatarSuccess(res, file) {\r\n        console.log(res);\r\n        this.newPortrait = res.filePath;\r\n      },\r\n      updateUserInfo() {\r\n      if (this.newName == \"\") {\r\n        this.$message.warning(\"用户昵称不能为空！\");\r\n        return;\r\n      }\r\n      if (this.newPortrait == \"\") {\r\n        this.$message.warning(\"用户头像不能为空！\");\r\n        return;\r\n      }\r\n      return this.axios\r\n        .post(\"http://localhost:80/user/updateUserInfo\", {\r\n          id: this.id,\r\n          portrait: this.newPortrait,\r\n          name: this.newName\r\n        })\r\n        .then((result) => {\r\n          console.log(result);\r\n          this.$message.success(\"更新用户信息成功！\");\r\n          this.name = this.newName;\r\n          this.portrait = this.newPortrait;\r\n        })\r\n        .catch((error) => {\r\n          this.$message.warning(\"更新用户信息失败！\");\r\n        });\r\n      }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n</style>"],"sourceRoot":"src/components"}]}